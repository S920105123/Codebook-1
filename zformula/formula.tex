%\documentclass[a4paper,10pt,oneside]{article}
%\usepackage{xeCJK}
%\setCJKmainfont{微軟正黑體}
%\begin{document}

\subsubsection {formula.txt}
\begin{enumerate}\itemsep = -5pt
\item 若多項式f(x)有有理根P/Q(PQ互質), 則P必為常數項a0之因數, Q必為領導係數an之因數
\item 滿足ceil(n/i)=k之最大i:
	\begin{enumerate}\itemsep = -3pt
	\item INF, if k=1
	\item n/(k-1)-1, else if k-1 整除 n
	\item n/(k-1), else
	\end {enumerate}
\item 滿足floor(n/i)=k之最大i: floor(n/k)
\item 尤拉函數: phi(n)=n乘上所有(1-1/p)，對n之所有質因數p
\item 尤拉定理: $a^phi(n) = 1 (mod n)$, a,n互質
\item 尤拉降冪: $a^b = a^{b%phi(n)+phi(n)} (mod n)$, b>phi(n), 不必互質
\item 次方同餘定理: $a^k mod p = (a mod p)^(k mod p-1)$ p是質數
\item Modulo inverse: inv[i] = - floor(p / i) * inv[p % i] (mod p)
\item 中國剩餘定理: x=Ai(mod mi), mi互質, Mi=所有m的乘積/mi, Ti=$Mi^-1$(mod mi), 則x=sigma(Mi*Ti*Ai)(mod M)
\item 枚舉擴展歐幾里得之解:
	若x0,y0為a*x+b*y = k之一組解，則
	x=x0+t*b/gcd(a,b), y=y0+t*a/gcd(a,b)亦為解，t為整數
\item Sigma\{i : gcd(i,n) = 1 and i in [1, n]\} = n*phi(n)/2 for n > 1
\item $Sigma\{i * r^i : i in [1, n]\} = (n*r^(n+1) - r*(r^n-1)/(r-1)) / (r-1)$
\item 投擲正面機率$p$之硬幣$n$次，正面偶數次機率: $0.5 + 0.5*(1-2p)^n$

\item 最大獨立集: 點的集合，其內點不相鄰
\item 最小點覆蓋: 點的集合，所有邊都被覆蓋
\item 最大匹配: 邊的集合，其內邊不共用點
\item 最小邊覆蓋: 邊的集合，所有點都被覆蓋
\item 最大獨立集+最小點覆蓋=V(數值)
\item 最大匹配+最小邊覆蓋=V(數值)
\item 最大匹配=最大流(directed, 二分圖)
\item 最大匹配=最小點覆蓋(二分圖)
\item 最小點覆蓋+最小邊覆蓋=V(數值，二分圖)
\item 二分圖帶權最小點覆蓋 = 對左邊的點v連cap(src,v)=w(v)之邊，右邊每個v連cap(v,tgt)=w(v)之邊，每條邊(u,v)連cap(u,v)=INF，皆有向，最大流即為所求。
\item 一般圖帶權最小邊覆蓋 = (將原圖每個w(u,v)改為w'(u,v)=c(u)+c(v)-w(u,v))，所求為新圖之最大權匹配+sigma\{c(v)\}，c(v)為點v連到的最小edge權重。

\item 一矩陣A所有eigen value之合=對角線合
\item 一矩陣A所有eigen value之積=det(A)

\item 三角形ABC, 對邊長abc:
\item area=sqrt(s(s-a)(s-b)(s-b)), s=周長/2
\item a/sinA = b/sinB = c/sinC = 2R, R為外接圓半徑
\item 內接圓半徑=2*area/(a+b+c)
\item 外接圓半徑=abc/4*area
\item 球缺體積, h為高, h <= R: PI*h^2*(R-h/3)

\item 枚舉submask: for (int s=m; s; s=(s-1)\&m) // Take care of ZERO by yourself

\item 某些質數:
54018521, 370248451, 6643838879, 119218851371, 5600748293801
39916801, 479001599, 87178291199, 8589935681, 433494437, 2971215073
\end{enumerate}

\subsubsection{Pick公式}
給定頂點坐標均是整點的簡單多邊形，面積=內部格點數+邊上格點數/2-1

\subsubsection{圖論}
\begin{enumerate}\itemsep = -5pt
\item 對於平面圖，$F=E-V+C+1$，C是連通分量數
\item 對於平面圖，$E\leq 3V-6$
\item 對於連通圖G，最大獨立點集的大小設為I(G)，最大匹配大小設為M(G)，最小點覆蓋設為Cv(G)，最小邊覆蓋設為Ce(G)。
對於任意連通圖：
	\begin{enumerate}\itemsep = -3pt
	\item $I(G)+Cv(G)=|V|$
	\item $M(G)+Ce(G)=|V|$
	\end{enumerate}
\item 對於連通二分圖：
	\begin{enumerate}\itemsep = -3pt
	\item $I(G)=Cv(G)$
	\item $M(G)=Ce(G)$
	\end{enumerate}
\item 不相交環覆蓋: 每個v拆vin, vout, 存在 iff. 二分完美匹配存在, 最小邊權環覆蓋=最小完美匹配
\item vertex disjoint DAG path cover (蓋住所有點): 每個v拆vin, vout, 原圖|V|-|最大二分匹配|即為所求
\item 可相交DAG path cover: 每個v對他能走到的所有點u連一條邊, 轉為disjoint. (轉換後所有中途點毋須存在)
\item max anti-chain over partial order (最大subset任兩人不可比較): 建出partial order的transitive closure, disjoint DAG path cover即為所求.
\item 最大權閉合圖：
	\begin{enumerate}\itemsep = -3pt
	\item $C(u,v)=\infty ,(u,v)\in E$
	\item $C(S,v)=W_v ,W_v>0$
	\item $C(v,T)=-W_v ,W_v<0$
	\item ans=$\sum_{W_v>0} W_v-flow(S,T)$
	\end{enumerate}
\item 最大密度子圖：
	\begin{enumerate}\itemsep = -1pt
	\item 求$max\left(\frac{W_e+W_v}{|V'|}\right),e \in E',v \in V'$
	\item $U=\sum_{v \in V}2W_v+\sum_{e \in E} W_e$
	\item $C(u,v)=W_{(u,v)} ,(u,v)\in E$，雙向邊
	\item $C(S,v)=U ,v \in V$
	\item $D_u=\sum_{(u,v) \in E} W_{(u,v)}$
	\item $C(v,T)=U+2g-D_v-2W_v ,v \in V$
	\item 二分搜$g$：\\$l=0,r=U,eps=1/n^2$\\if($(U\times|V|-flow(S,T))/2>0$) $l=mid$\\else $r=mid$
	\item ans=$min\_cut(S,T)$
	\item $|E|=0$要特殊判斷
	\end{enumerate}
\item 弦圖：
	\begin{enumerate}\itemsep = -3pt
	\item 點數大於3的環都要有一條弦
	\item 完美消除序列從後往前依次給每個點染色，給每個點染上可以染的最小顏色
	\item 最大團大小=色數
	\item 最大獨立集:完美消除序列從前往後能選就選
	\item 最小團覆蓋:最大獨立集的點和他延伸的邊構成
	\item 區間圖是弦圖
	\item 區間圖的完美消除序列:將區間按造又端點由小到大排序
	\item 區間圖染色:用線段樹做
	\end{enumerate}
\end{enumerate}
\subsubsection{dinic特殊圖複雜度}
\begin{enumerate}\itemsep = -5pt
\item 單位流：$O\left(min\left(V^{3/2},E^{1/2}\right)E\right)$
\item 二分圖：$O\left(V^{1/2}E\right)$
\end{enumerate}

\subsubsection{0-1分數規劃}
$x_i=\{0,1\}$，$x_i$可能會有其他限制，求$max\left(\frac{\sum B_ix_i}{\sum C_ix_i}\right)$
\begin{enumerate}\itemsep = -1pt
\item $D(i,g)=B_i-g\times C_i$
\item $f(g)=\sum D(i,g)x_i$
\item $f(g)=0$時$g$為最佳解，$f(g)<0$沒有意義
\item 因為$f(g)$單調可以二分搜$g$
\item 或用Dinkelbach通常比較快
\end{enumerate}
\begin{lstlisting}[language=C++]
binary_search(){
	while(r-l>eps){
		g=(l+r)/2;
		for(i:所有元素)D[i]=B[i]-g*C[i];//D(i,g) 
		找出一組合法x[i]使f(g)最大;
		if(f(g)>0) l=g;
		else r=g;
	}
	Ans = r;
}
Dinkelbach(){
	g=任意狀態(通常設為0);
	do{
		Ans=g;
		for(i:所有元素)D[i]=B[i]-g*C[i];//D(i,g) 
		找出一組合法x[i]使f(g)最大;
		p=0,q=0;
		for(i:所有元素)
			if(x[i])p+=B[i],q+=C[i];
		g=p/q;//更新解，注意q=0的情況 
	}while(abs(Ans-g)>EPS);
	return Ans;
}
\end{lstlisting}

\subsubsection{學長公式}
\begin{enumerate}\itemsep = -3pt
\item $\sum_{d|n} \phi(n) = n$
\item $g(n) = \sum_{d|n} f(d) => f(n) = \sum_{d|n} \mu(d) \times g(n/d)$
\item $\text{Harmonic series } H_n = \ln(n) + \gamma + 1/(2n) - 1/(12n^2) + 1/(120n^4)$
\item $ \gamma = 0.57721566490153286060651209008240243104215$
\item 格雷碼$=n\oplus (n>>1)$
\item $SG(A+B)=SG(A)\oplus SG(B)$
\item 選轉矩陣$M(\theta)= \left( \begin{array}{ccc}
cos\theta & -sin\theta \\ 
sin\theta &  cos\theta
\end{array} \right)$
\end{enumerate}

\subsubsection{基本數論}
\begin{enumerate}\itemsep = -3pt
	\item $\sum_{d|n} \mu (n)=[n==1]$
	\item $g(m)=\sum_{d|m}f(d)\Leftrightarrow f(m)=\sum_{d|m}\mu (d) \times g(m/d)$
	\item $\sum_{i=1}^n\sum_{j=1}^m$互質數量$=\sum \mu (d)\left \lfloor \frac{n}{d} \right \rfloor \left \lfloor \frac{m}{d} \right \rfloor$
	\item $\sum_{i=1}^n\sum_{j=1}^nlcm(i,j)=n\sum_{d|n} d \times \phi (d)$
\end{enumerate}

\subsubsection{排組公式}
\begin{enumerate}
\itemsep = -3pt
\item k卡特蘭$\frac{C_{n}^{kn}}{n(k-1)+1}$，$C_{m}^{n}=\frac{n!}{m!(n-m)!}$
\item $H(n,m)\cong x_1+x_2\ldots +x_n=k, num=C_{k}^{n+k-1}$
\item Stirling number of $2^{nd}$,$n$人分$k$組方法數目
	\begin{enumerate}\itemsep = -2pt
		\item $S(0,0)=S(n,n)=1$
		\item $S(n,0)=0$
		\item $S(n,k)=kS(n-1,k)+S(n-1,k-1)$
	\end{enumerate}
\item Bell number,$n$人分任意多組方法數目
	\begin{enumerate}\itemsep = -2pt
		\item $B_0=1$
		\item $B_n=\sum_{i=0}^nS(n,i)$
		\item $B_{n+1}=\sum_{k=0}^{n} C_k^n B_k$
		\item $B_{p+n}\equiv B{_n}+B_{n+1} mod p$, p is prime
		\item $B_{p^m+n}\equiv mB{_n}+B_{n+1} mod p$, p is prime
		\item From $B_0: 1,1,2,5,15,52,\\203,877,4140,21147,115975$
	\end{enumerate}
\item Derangement,錯排,沒有人在自己位置上
	\begin{enumerate}\itemsep = -2pt
		\item $D_n=n!(1-\frac{1}{1!}+\frac{1}{2!}-\frac{1}{3!}\ldots +(-1)^n\frac{1}{n!})$
		\item $D_n=(n-1)(D_{n-1}+D_{n-2}),D_0=1,D_1=0$
		\item From $D_0: 1,0,1,2,9,44,\\265,1854,14833,133496$
	\end{enumerate}
\item Binomial\ Equality
	\begin{enumerate}\itemsep = -2pt
	    \item $\sum_k \binom{r}{m + k} \binom{s}{n - k} = \binom{r + s}{m + n}$
         \item $\sum_k \binom{l}{m + k} \binom{s}{n + k} = \binom{l + s}{l -m + n}$		
         \item $\sum_k \binom{l}{m + k} \binom{s + k}{n}(-1)^k = (-1)^{l + m} \binom{s - m}{n - l}$
		\item $\sum_{k\leq l} \binom{l - k}{m} \binom{s}{k - n}(-1)^k = (-1)^{l + m} \binom{s - m - 1}{l - n - m}$
		\item $\sum_{0 \leq k \leq l} \binom{l - k}{m} \binom{q + k}{n} = \binom{l + q + 1}{m + n + 1}$
		\item $\binom{r}{k} = (-1)^k\binom{k - r - 1}{k}$
		\item $\binom{r}{m} \binom{m}{k} = \binom{r}{k} \binom{r - k}{m - k}$
		\item $\sum_{k\leq n} \binom{r + k}{k} = \binom{r + n + 1}{n}$
		\item $\sum_{0\leq k \leq n} \binom{k}{m} = \binom{n + 1}{m + 1}$
		\item $\sum_{k\leq m}\binom{m + r}{k}x^ky^k = \sum_{k\leq m}\binom{-r}{k}(-x)^k (x+y)^{m-k}$	
	\end{enumerate}
\end{enumerate}


\subsubsection{冪次,冪次和}
\begin{enumerate}\itemsep = -3pt
	\item $a^b\%P=a^{b\% \varphi (p)+\varphi (p)},b\geq \varphi (p)$
	\item $1^3+2^3+3^3+\ldots +n^3=\frac{n^4}{4}+\frac{n^3}{2}+\frac{n^2}{4}$
	\item $1^4+2^4+3^4+\ldots +n^4=\frac{n^5}{5}+\frac{n^4}{2}+\frac{n^3}{3}-\frac{n}{30}$
	\item $1^5+2^5+3^5+\ldots +n^5=\frac{n^6}{6}+\frac{n^5}{2}+\frac{5n^4}{12}-\frac{n^2}{12}$
	\item $0^k+1^k+2^k+\ldots +n^k = P(k),P(k)=\frac{(n+1)^{k+1}-\sum_{i=0}^{k-1}C_i^{k+1}P(i)}{k+1},P(0)=n+1$
	\item $\sum_{k=0}^{m-1}k^n=\frac{1}{n+1}\sum_{k=0}^{n}C_k^{n+1}B_km^{n+1-k}$
	\item $\sum_{j=0}^{m}C_j^{m+1}B_j=0,B_0=1$
	\item 除了$B_1=-1/2$，剩下的奇數項都是$0$
	\item $B_2=1/6,B_4=-1/30,B_6=1/42,B_8=-1/30,B_{10}=5/66,B_{12}=-691/2730,B_{14}=7/6,B_{16}=-3617/510,B_{18}=43867/798,B_{20}=-174611/330,$
\end{enumerate}

\subsubsection{Burnside's lemma}
\begin{enumerate}\itemsep = -3pt
	\item $|X/G| = \frac{1}{|G|}\sum_{g \in G}|X^g|$
	\item $X^g=t^{c(g)}$
	\item $G$表示有幾種轉法，$X^g$表示在那種轉法下，有幾種是會保持對稱的，$t$是顏色數，$c(g)$是循環節不動的面數。
	\item 正立方體塗三顏色，轉0有$3^6$ 個元素不變，轉90有6種，每種有$3^3$不變，180有$3\times 3^4$，120(角)有$8\times 3^2$，180(邊)有$6\times 3^3$，全部$\frac{1}{24}\left(3^6+6\times 3^3 + 3 \times 3^4 + 8 \times 3^2 + 6 \times 3^3 \right) = 57$
\end{enumerate}

\subsubsection{Count on a tree}
\begin{enumerate}\itemsep = -3pt
	\item Rooted tree: $s_{n+1}=\frac{1}{n}\sum_{i=1}^{n}(i\times a_i\times \sum_{j=1}^{\left \lfloor  n/i\right \rfloor} a_{n+1-i\times j})$
	\item Unrooted tree: 
	\begin{enumerate}\itemsep = -2pt
		\item Odd:$a_n-\sum_{i=1}^{n/2}a_ia_{n-i}$
		\item Even:$Odd+\frac{1}{2}a_{n/2}(a_{n/2}+1)$
	\end{enumerate}
	\item Spanning Tree
	\begin{enumerate}\itemsep = -2pt
		\item 完全圖$n^n-2$
		\item 一般圖(Kirchhoff's theorem)$M[i][i]=degree(V_i)$,$M[i][j]=-1$,if have $E(i,j)$,$0$ if no edge. delete any one row and col in $A$, $ans = det(A)$
	\end{enumerate}
\end{enumerate}

%\end{document}